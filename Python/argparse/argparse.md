# 1. å¿«é€Ÿå…¥é—¨

## 1.1 argparseç®€ä»‹

argparse æ¨¡å—å¯ä»¥è®©äººè½»æ¾ç¼–å†™ç”¨æˆ·å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£ã€‚ç¨‹åºå®šä¹‰å®ƒéœ€è¦å“ªäº›å‚æ•°ï¼Œargparse å°†ä¼šçŸ¥é“å¦‚ä½•ä» sys.argv è§£æå®ƒä»¬ã€‚argparse æ¨¡å—è¿˜èƒ½è‡ªåŠ¨ç”Ÿæˆå¸®åŠ©å’Œç”¨æ³•æ¶ˆæ¯æ–‡æœ¬ã€‚è¯¥æ¨¡å—è¿˜ä¼šåœ¨ç”¨æˆ·å‘ç¨‹åºä¼ å…¥æ— æ•ˆå‚æ•°æ—¶å‘å‡ºé”™è¯¯æ¶ˆæ¯ã€‚

## 1.2 æ ¸å¿ƒåŠŸèƒ½

### 1.2.1 åˆ›å»ºè§£æå™¨å¯¹è±¡

argparse æ¨¡å—å¯¹å‘½ä»¤è¡Œæ¥å£çš„æ”¯æŒæ˜¯å›´ç»• argparse.ArgumentParser çš„å®ä¾‹å»ºç«‹çš„ã€‚ å®ƒæ˜¯ä¸€ä¸ª<font color='red'><b>ç”¨äºå‚æ•°è§„æ ¼è¯´æ˜çš„å®¹å™¨</b></font>å¹¶åŒ…å«å¤šä¸ªå…¨é¢åº”ç”¨è§£æå™¨çš„é€‰é¡¹:

```python
import argparse

# åˆ›å»ºä¸€ä¸ªè§£æå™¨å¯¹è±¡
parser = argparse.ArgumentParser(
    prog='ProgramName',  # æŒ‡å®šç¨‹åºåç§°ä¸º 'ProgramName'
    description='What the program does',  # ç¨‹åºçš„æè¿°
    epilog='Text at the bottom of help'  # å¸®åŠ©ä¿¡æ¯åº•éƒ¨çš„æ–‡æœ¬
)

# è®©è§£æå™¨å¯¹è±¡è§£æå‚æ•°
args = parser.parse_args()
```

ğŸ¤” ğ‘¸ğ’–ğ’†ğ’”ğ’•ğ’Šğ’ğ’ï¼š`argparse.ArgumentParser`ä¸­çš„ä¸‰ä¸ªå‚æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ
ğŸ¥³ ğ‘¨ğ’ğ’”ğ’˜ğ’†ğ’“ï¼šåœ¨ `argparse.ArgumentParser` æ„é€ å‡½æ•°ä¸­ï¼Œ`prog`ã€`description` å’Œ `epilog` æ˜¯ä¸‰ä¸ªå¯é€‰å‚æ•°ï¼Œå®ƒä»¬çš„ä½œç”¨å¦‚ä¸‹ï¼š

1. **prog**:
   - è¿™ä¸ªå‚æ•°æŒ‡å®šäº†ç¨‹åºçš„åç§°ã€‚å®ƒå°†è¢«æ˜¾ç¤ºåœ¨è‡ªåŠ¨ç”Ÿæˆçš„å¸®åŠ©ä¿¡æ¯å’Œä½¿ç”¨ä¿¡æ¯ä¸­ï¼Œé€šå¸¸æ˜¯ç¨‹åºçš„è¿è¡Œè„šæœ¬åç§°æˆ–å‘½ä»¤è¡Œè°ƒç”¨çš„åç§°ã€‚
   - ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ Python è„šæœ¬åä¸º `myscript.py`ï¼Œä½ å¯ä»¥å°†å…¶è®¾ç½®ä¸º `prog='myscript'`ã€‚

2. **description**:
   - è¿™ä¸ªå‚æ•°æä¾›äº†ç¨‹åºçš„ç®€çŸ­æè¿°ï¼Œå®ƒå°†åœ¨è‡ªåŠ¨ç”Ÿæˆçš„å¸®åŠ©ä¿¡æ¯çš„å¼€å¤´éƒ¨åˆ†æ˜¾ç¤ºã€‚è¿™ä¸ªæè¿°åº”è¯¥ç®€æ´æ˜äº†åœ°è¯´æ˜ç¨‹åºçš„ä¸»è¦åŠŸèƒ½æˆ–ç”¨é€”ã€‚
   - ä¾‹å¦‚ï¼Œ`description='This program processes input files and generates a report.'`ã€‚

3. **epilog**:
   - è¿™ä¸ªå‚æ•°å…è®¸ä½ æ·»åŠ ä¸€æ®µåœ¨è‡ªåŠ¨ç”Ÿæˆçš„å¸®åŠ©ä¿¡æ¯çš„åº•éƒ¨æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚è¿™å¯ä»¥æ˜¯é¢å¤–çš„è¯´æ˜ã€æ³¨æ„äº‹é¡¹æˆ–ä»»ä½•å…¶ä»–ä¿¡æ¯ï¼Œå®ƒå°†åœ¨æ‰€æœ‰è‡ªåŠ¨ç”Ÿæˆçš„å‚æ•°è¯´æ˜ä¹‹åæ˜¾ç¤ºã€‚
   - ä¾‹å¦‚ï¼Œ`epilog='Please report bugs to support@example.com.'`ã€‚

è¿™äº›å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä½†å®ƒä»¬æä¾›äº†ä¸€ç§æ–¹å¼æ¥å¢å¼ºè‡ªåŠ¨ç”Ÿæˆçš„å¸®åŠ©ä¿¡æ¯çš„å¯è¯»æ€§å’Œæœ‰ç”¨æ€§ã€‚å¦‚æœè¿™äº›å‚æ•°æ²¡æœ‰è¢«æ˜ç¡®è®¾ç½®ï¼Œ`argparse` å°†ä½¿ç”¨é»˜è®¤å€¼æˆ–ä¸æ˜¾ç¤ºæŸäº›éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸è®¾ç½® `prog`ï¼Œ`argparse` å°†ä½¿ç”¨å®é™…è¿è¡Œè„šæœ¬çš„åç§°ã€‚å¦‚æœä¸è®¾ç½® `description` å’Œ `epilog`ï¼Œç›¸åº”çš„éƒ¨åˆ†å°†ä¸ä¼šè¢«æ˜¾ç¤ºã€‚

é‚£æˆ‘ä»¬è¿è¡Œä¸€ä¸‹è¿™æ®µä»£ç ï¼š

```

```

å¾ˆæ­£å¸¸ï¼Œè¿™æ®µä»£ç æ²¡æœ‰è¾“å‡ºã€‚è¿™æ˜¯å› ä¸ºè¿™æ®µä»£ç æœ¬èº«åªæ˜¯åˆå§‹åŒ–äº†ä¸€ä¸ªå‚æ•°è§£æå™¨ï¼Œè®¾ç½®äº†ä¸€äº›åŸºæœ¬çš„æè¿°ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å°†ç”¨äºç”Ÿæˆå¸®åŠ©æ–‡æœ¬ã€‚è™½ç„¶æœ‰å®é™…çš„å‚æ•°è§£æï¼Œä½†æˆ‘ä»¬æ²¡æœ‰ç»™è§£æå™¨å¯¹è±¡æ·»åŠ ä»»ä½•å‚æ•°ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰ä»€ä¹ˆä½œç”¨ã€‚é‚£æˆ‘ä»¬è®¾ç½®çš„`prog`ã€`description`ã€`epilog`å‚æ•°å‘¢ï¼Ÿè¿™éœ€è¦æˆ‘ä»¬åœ¨è°ƒç”¨è¯¥è„šæœ¬çš„æ—¶å€™æ·»åŠ `-h`æˆ–`--help`å‚æ•°ï¼š

```bash
python a.py -h

# æˆ–è€…æ˜¯
python a.py --help
```

ç»“æœå¦‚ä¸‹ï¼š

```
usage: ProgramName [-h]

What the program does

options:
  -h, --help  show this help message and exit

Text at the bottom of help

```

æˆ‘ä»¬å¯¹è¿™ä¸ªç»“æœè¿›è¡Œåˆ†æï¼š

```python
usage: ProgramName [-h]  # è¿™ä¸€è¡Œæ˜¾ç¤ºäº†ç¨‹åºçš„ç”¨æ³•ã€‚è¿™é‡Œ ProgramName åº”è¯¥æ˜¯ prog å‚æ•°æŒ‡å®šçš„ç¨‹åºåç§°ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›ä»»ä½•å‚æ•°ï¼Œç¨‹åºå°†æ˜¾ç¤ºè¿™ä¸ªåŸºæœ¬çš„ç”¨æ³•ä¿¡æ¯ã€‚

What the program does  # è¿™ä¸€è¡Œæ˜¯ç¨‹åºçš„ç®€çŸ­æè¿°ï¼ˆè¿™ä¸ªè„šæœ¬çš„ä½œç”¨ã€åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼‰ï¼Œå¯¹åº”äº ArgumentParser æ„é€ å‡½æ•°ä¸­çš„ description å‚æ•°ã€‚

options:  # è¿™ä¸ªæ ‡é¢˜ä¸‹é¢æ˜¯ç¨‹åºæ¥å—çš„å‘½ä»¤è¡Œé€‰é¡¹åˆ—è¡¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæ˜¾ç¤ºäº†å¸®åŠ©é€‰é¡¹ -h, --helpï¼ˆğŸ’¡ å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ·»åŠ å…¶ä»–å‚æ•°ï¼Œæ‰€ä»¥å®ƒåªæœ‰ä¸€ä¸ªé»˜è®¤çš„--helpï¼‰ã€‚
  -h, --help  show this help message and exit

Text at the bottom of help  # è¿™ä¸€è¡Œæ˜¯ epilog å‚æ•°çš„å†…å®¹ï¼Œå®ƒæ˜¾ç¤ºåœ¨å¸®åŠ©ä¿¡æ¯çš„æœ€åã€‚è¿™å¯ä»¥åŒ…å«é¢å¤–çš„è¯´æ˜æˆ–ä¿¡æ¯ï¼Œæ¯”å¦‚è”ç³»ä¿¡æ¯ã€ç‰ˆæƒå£°æ˜ç­‰ã€‚

```

> ğŸ’¡ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`prog`ã€`description`ã€`epilog`å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œè€Œä¸”`prog`å‚æ•°ä¹Ÿä¸ä¼šæ£€æŸ¥å½“å‰è„šæœ¬çš„åç§°æ˜¯å¦ä¸€è‡´ï¼ˆä¸ä¼šæŠ¥é”™ï¼‰ã€‚

### 1.2.2 ä¸ºè§£æå™¨æ·»åŠ å‚æ•°

`ArgumentParser.add_argument()` æ–¹æ³•å°†å•ä¸ªå‚æ•°è§„æ ¼è¯´æ˜å…³è”åˆ°è§£æå™¨ã€‚ å®ƒæ”¯æŒä½ç½®å‚æ•°ï¼Œæ¥å—å„ç§å€¼çš„é€‰é¡¹ï¼Œä»¥åŠå„ç§å¯ç”¨/ç¦ç”¨æ——æ ‡ï¼ˆFlagï¼‰:

```python
import argparse
from prettytable import PrettyTable
import re


def get_help_for_argument(parser, arg_name):
    for action in parser._actions:
        if action.dest == arg_name or (action.option_strings and any(opt == '--'+arg_name for opt in action.option_strings)):
            return action.help
    return "N/A"


def print_args(args, parser):
    ptable = PrettyTable(['Argument', 'Type', 'Value', 'Help/Description'])
    ptable.align = 'l'
    

    for name, value in args._get_kwargs():
        ptable.add_row(
            [
                name, 
                re.findall(pattern=r"<class '(.*)'>", string=str(type(value)))[0], 
                value, 
                get_help_for_argument(parser=parser, arg_name=name)
            ]
        )
    
    print(ptable)


def get_opts():
    # åˆ›å»ºä¸€ä¸ªè§£æå™¨å¯¹è±¡
    parser = argparse.ArgumentParser(
        prog='ProgramName',  # æŒ‡å®šç¨‹åºåç§°ä¸º 'ProgramName'
        description='What the program does',  # ç¨‹åºçš„æè¿°
        epilog='Text at the bottom of help'  # å¸®åŠ©ä¿¡æ¯åº•éƒ¨çš„æ–‡æœ¬
    )

    # ä¸ºè§£æå™¨å¯¹è±¡æ·»åŠ å‚æ•°
    parser.add_argument('config', help='The path of config.')  # ä½ç½®å‚æ•°
    parser.add_argument('--dataset', type=str, default='Datasets/coco128', help='The dir path of dataset.') 
    parser.add_argument('--weights-path', type=str, default='runs/detect/exp/weights/best.pt', help='The path of model weights.') 
    parser.add_argument('-e', '--epoch', type=int, default=150, help='The epoch of training.')
    parser.add_argument('-lr', '--learning_rate', type=float, default=1e-4, help='The learning rate of optimizer.')
    parser.add_argument('-c', '--count')  # 
    parser.add_argument('-v', '--verbose', action='store_true')  # on/offçš„ä¸€ä¸ªflag

    # è®©è§£æå™¨å¯¹è±¡è§£æå‚æ•°
    args = parser.parse_args()
    
    return args, parser


if __name__ == '__main__':
    args, parser = get_opts()
    print_args(args, parser)
```

è¿è¡Œä»£ç ï¼š

```bash
python a.py 123
```

ç»“æœå¦‚ä¸‹ï¼š

```
+---------------+----------+---------------------------------+---------------------------------+
| Argument      | Type     | Value                           | Help/Description                |
+---------------+----------+---------------------------------+---------------------------------+
| config        | str      | 123                             | The path of config.             |
| dataset       | str      | Datasets/coco128                | The dir path of dataset.        |
| weights_path  | str      | runs/detect/exp/weights/best.pt | The path of model weights.      |
| epoch         | int      | 150                             | The epoch of training.          |
| learning_rate | float    | 0.0001                          | The learning rate of optimizer. |
| count         | NoneType | None                            | None                            |
| verbose       | bool     | False                           | None                            |
+---------------+----------+---------------------------------+---------------------------------+
```

è¿™æ®µä»£ç ä¸­æˆ‘é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª`get_help_for_argument`çš„å‡½æ•°ï¼Œå®ƒæ˜¯ä¸ºäº†è·å–æ¯ä¸ªå‚æ•°çš„helpä¿¡æ¯çš„ï¼Œå…¶æ¬¡æˆ‘å®šä¹‰äº†ä¸€ä¸ª`print_args()`å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è°ƒç”¨äº†`PrettyTable`ä»¥åŠæ­£åˆ™è¡¨è¾¾å¼ï¼Œä»è€Œå¯ä»¥ç¾åŒ–è¾“å‡ºè§£æå™¨çš„æ‰“å°å½¢å¼ã€‚

å½“ç„¶ï¼Œæˆ‘ä»¬çš„é‡ç‚¹å½“ç„¶ä¸æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œé‡ç‚¹æ˜¯å¦‚ä½•ç»™è§£æå™¨å¯¹è±¡æ·»åŠ å‚æ•°ï¼Œä¸‹é¢æ˜¯æ·»åŠ å‚æ•°çš„è¯¦ç»†åˆ†æï¼š

- `parser.add_argument('config', help='The path of config.')` æ·»åŠ äº†ä¸€ä¸ªä½ç½®å‚æ•° `config`ï¼Œç”¨æˆ·å¿…é¡»æä¾›è¿™ä¸ªå‚æ•°ï¼Œå®ƒç”¨äºæŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚
- `parser.add_argument('--dataset', type=str, default='Datasets/coco128', help='The dir path of dataset.')` æ·»åŠ äº†ä¸€ä¸ªå¯é€‰å‚æ•° `--dataset`ï¼Œå®ƒæœ‰ä¸€ä¸ªé»˜è®¤å€¼ `'Datasets/coco128'`ï¼Œç”¨äºæŒ‡å®šæ•°æ®é›†çš„ç›®å½•è·¯å¾„ã€‚
- `parser.add_argument('--weights-path', type=str, default='runs/detect/exp/weights/best.pt', help='The path of model weights.')` æ·»åŠ äº† `--weights-path` å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ¨¡å‹æƒé‡æ–‡ä»¶çš„è·¯å¾„ï¼Œä¹Ÿæœ‰ä¸€ä¸ªé»˜è®¤å€¼ã€‚
- `parser.add_argument('-e', '--epoch', type=int, default=150, help='The epoch of training.')` æ·»åŠ äº† `-e` æˆ– `--epoch` å‚æ•°ï¼Œç”¨äºæŒ‡å®šè®­ç»ƒçš„è½®æ•°ï¼Œç±»å‹ä¸ºæ•´æ•°ï¼Œæœ‰é»˜è®¤å€¼ã€‚
- `parser.add_argument('-lr', '--learning_rate', type=float, default=1e-4, help='The learning rate of optimizer.')` æ·»åŠ äº† `-lr` æˆ– `--learning_rate` å‚æ•°ï¼Œç”¨äºæŒ‡å®šä¼˜åŒ–å™¨çš„å­¦ä¹ ç‡ï¼Œç±»å‹ä¸ºæµ®ç‚¹æ•°ï¼Œæœ‰é»˜è®¤å€¼ã€‚
- `parser.add_argument('-c', '--count')` æ·»åŠ äº† `-c` æˆ– `--count` å‚æ•°ï¼Œä½†æ²¡æœ‰æŒ‡å®šç±»å‹ã€é»˜è®¤å€¼æˆ–å¸®åŠ©ä¿¡æ¯ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªé”™è¯¯æˆ–é—æ¼ï¼Œå› ä¸ºé€šå¸¸å‚æ•°åº”è¯¥æœ‰ `help` æè¿°ã€‚
- `parser.add_argument('-v', '--verbose', action='store_true')` æ·»åŠ äº† `-v` æˆ– `--verbose` å‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€å…³å‚æ•°ï¼Œå½“ç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­æä¾›è¿™ä¸ªå‚æ•°æ—¶ï¼Œ`args.verbose` å°†è¢«è®¾ç½®ä¸º `True`ã€‚

ğŸ¤” ğ‘¸ğ’–ğ’†ğ’”ğ’•ğ’Šğ’ğ’ï¼šä»€ä¹ˆæ˜¯ä½ç½®å‚æ•°ï¼Œä»€ä¹ˆæ˜¯å¯é€‰å‚æ•°ï¼Ÿ
ğŸ¥³ ğ‘¨ğ’ğ’”ğ’˜ğ’†ğ’“ï¼šåœ¨ `argparse` æ¨¡å—ä¸­ï¼Œå‚æ•°ä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šâ‘ <font color='red'><b>ä½ç½®å‚æ•°ï¼ˆPositional Argumentsï¼‰</b></font>å’Œâ‘¡<font color='green'><b>å¯é€‰å‚æ•°ï¼ˆOptional Argumentsï¼‰</b></font>ã€‚

1. **ä½ç½®å‚æ•°**ï¼š
   - ä½ç½®å‚æ•°æ˜¯ç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­<font color='red'><b>å¿…é¡»æä¾›çš„å‚æ•°</b></font>ï¼Œå®ƒä»¬æ²¡æœ‰å‰ç¼€ï¼ˆå¦‚ `-h` æˆ– `--`ï¼‰ï¼Œå¹¶ä¸”é€šå¸¸æŒ‰ç…§åœ¨ `ArgumentParser` ä¸­æ·»åŠ å®ƒä»¬çš„é¡ºåºæ¥æ¥æ”¶å€¼ã€‚
   - ä½ç½®å‚æ•°é€šå¸¸ç”¨äºç¨‹åºçš„ä¸»è¦è¾“å…¥ï¼Œä¾‹å¦‚æ–‡ä»¶åã€è¾“å…¥æ•°æ®ç­‰ã€‚
   - åœ¨ `add_argument` æ–¹æ³•ä¸­æ·»åŠ ä½ç½®å‚æ•°æ—¶ï¼Œåªéœ€è¦æŒ‡å®šå‚æ•°çš„åç§°ï¼Œä¾‹å¦‚ï¼š
     ```python
     parser.add_argument('config', help='The path of config.')  # é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™ä¸ªæ˜¯å¿…é¡»æä¾›çš„
     ```
   - ç”¨æˆ·åœ¨è°ƒç”¨ç¨‹åºæ—¶å¿…é¡»æŒ‰ç…§é¡ºåºæä¾›è¿™äº›å‚æ•°çš„å€¼ã€‚

2. **å¯é€‰å‚æ•°**ï¼š
   - å¯é€‰å‚æ•°æ˜¯ç”¨æˆ·å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šçš„å‚æ•°ã€‚å®ƒä»¬ä½¿ç”¨ `-h` æˆ– `-` ä½œä¸ºå‰ç¼€ï¼Œå¹¶ä¸”å¯ä»¥æœ‰é•¿æ ¼å¼å’ŒçŸ­æ ¼å¼ä¸¤ç§å½¢å¼ã€‚
   - å¯é€‰å‚æ•°é€šå¸¸ç”¨äºé…ç½®ç¨‹åºçš„è¡Œä¸ºï¼Œä¾‹å¦‚è®¾ç½®æ—¥å¿—çº§åˆ«ã€å¯ç”¨æˆ–ç¦ç”¨æŸä¸ªç‰¹æ€§ç­‰ã€‚
   - åœ¨ `add_argument` æ–¹æ³•ä¸­æ·»åŠ å¯é€‰å‚æ•°æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `--` æ¥æŒ‡å®šé•¿æ ¼å¼åç§°ï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ ä¸€ä¸ªçŸ­æ ¼å¼åç§°ï¼ˆä½¿ç”¨ `-`ï¼‰ï¼Œä¾‹å¦‚ï¼š
     ```python
     parser.add_argument('--verbose', help='Enable verbose mode')
     parser.add_argument('-v', '--version', action='version', version='%(prog)s 1.0')
     ```
   - å¦‚æœç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­æä¾›äº†å¯é€‰å‚æ•°ï¼Œ`argparse` å°†æ ¹æ®å‚æ•°çš„å®šä¹‰æ¥è®¾ç½®ç›¸åº”çš„å€¼æˆ–è¡Œä¸ºã€‚

**ä¸¤ç§å‚æ•°çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š**

- **å¿…éœ€æ€§**ï¼šâš ï¸ <font color='red'><b>ä½ç½®å‚æ•°æ˜¯å¿…éœ€çš„</b></font>ï¼Œè€Œå¯é€‰å‚æ•°å¯ä»¥ä¸æä¾›ã€‚
- **å‰ç¼€**ï¼šä½ç½®å‚æ•°æ²¡æœ‰å‰ç¼€ï¼Œå¯é€‰å‚æ•°ä½¿ç”¨ `-h` æˆ– `-` ä½œä¸ºå‰ç¼€ã€‚
- **é¡ºåº**ï¼šä½ç½®å‚æ•°åœ¨å‘½ä»¤è¡Œä¸­<font color='red'><b>å‡ºç°çš„é¡ºåºå¾ˆé‡è¦</b></font>ï¼Œè€Œå¯é€‰å‚æ•°åˆ™ä¸éœ€è¦è€ƒè™‘é¡ºåºã€‚

> `argparse` è¿˜æä¾›äº†ä¸€äº›å…¶ä»–ç±»å‹çš„å‚æ•°ï¼Œä¾‹å¦‚å¼€å…³å‚æ•°ï¼ˆé€šè¿‡ `action='store_true'` æˆ– `action='store_false'` å®šä¹‰ï¼‰ï¼Œå®ƒä»¬åœ¨ç”¨æˆ·æŒ‡å®šæ—¶è®¾ç½®ä¸º `True` æˆ– `False`ã€‚ä½†åŸºæœ¬ä¸Šï¼Œæ‰€æœ‰å‚æ•°éƒ½å¯ä»¥å½’ç±»ä¸ºä½ç½®å‚æ•°æˆ–å¯é€‰å‚æ•°ã€‚

### 1.2.3 è§£æå‡½æ•°

`ArgumentParser.parse_args()` æ–¹æ³•è¿è¡Œè§£æå™¨å¹¶å°†æå–çš„æ•°æ®æ”¾å…¥ `argparse.Namespace` å¯¹è±¡:

```python
# è®©è§£æå™¨å¯¹è±¡è§£æå‚æ•°
args = parser.parse_args()
```

ğŸ¤” ğ‘¸ğ’–ğ’†ğ’”ğ’•ğ’Šğ’ğ’ï¼š`argparse.Namespace` å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿ
ğŸ¥³ ğ‘¨ğ’ğ’”ğ’˜ğ’†ğ’“ï¼š`argparse.Namespace` å¯¹è±¡æ˜¯ Python `argparse` æ¨¡å—ä¸­ç”¨äºå­˜å‚¨è§£æåçš„å‘½ä»¤è¡Œå‚æ•°å€¼çš„ä¸€ç§å®¹å™¨ã€‚å½“ `ArgumentParser` çš„ `parse_args()` æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šå°†ç”¨æˆ·é€šè¿‡å‘½ä»¤è¡Œæä¾›çš„å‚æ•°å€¼æŒ‰ç…§å®šä¹‰çš„å‚æ•°å±æ€§å­˜å‚¨åœ¨è¿™ä¸ªå‘½åç©ºé—´å¯¹è±¡ä¸­ã€‚

ä»¥ä¸‹æ˜¯ `argparse.Namespace` å¯¹è±¡çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼š

1. **å±æ€§è®¿é—®**ï¼šæ¯ä¸ªå‘½ä»¤è¡Œå‚æ•°éƒ½å¯¹åº” `Namespace` å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚å±æ€§çš„åç§°å¯¹åº”å‚æ•°çš„ `dest` å±æ€§ï¼ˆé»˜è®¤ä¸ºå‚æ•°åç§°çš„é•¿æ ¼å¼åç§°å»é™¤å‰ç¼€å’Œç ´æŠ˜å·ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå‚æ•°ä½¿ç”¨ `--verbose` å®šä¹‰ï¼Œé‚£ä¹ˆåœ¨ `Namespace` å¯¹è±¡ä¸­å¯ä»¥é€šè¿‡ `verbose` å±æ€§è®¿é—®å®ƒçš„å€¼ã€‚

2. **è‡ªåŠ¨ç±»å‹è½¬æ¢**ï¼š`Namespace` å¯¹è±¡æ ¹æ®å‚æ•°å®šä¹‰ä¸­çš„ `type` å±æ€§è‡ªåŠ¨å°†å‘½ä»¤è¡Œè¾“å…¥è½¬æ¢ä¸ºç›¸åº”çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®šä¹‰äº†ä¸€ä¸ªå‚æ•°ç±»å‹ä¸º `int`ï¼Œé‚£ä¹ˆè¾“å…¥çš„å­—ç¬¦ä¸²å°†è¢«è½¬æ¢ä¸ºæ•´æ•°ã€‚

3. **é»˜è®¤å€¼**ï¼šå¦‚æœå‚æ•°æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸­æä¾›ï¼Œ`Namespace` å¯¹è±¡å°†ä½¿ç”¨å‚æ•°å®šä¹‰ä¸­æŒ‡å®šçš„ `default` å€¼ã€‚

4. **å¼€å…³å‚æ•°**ï¼šå¯¹äºä½¿ç”¨ `action='store_true'` æˆ– `action='store_false'` å®šä¹‰çš„å‚æ•°ï¼Œ`Namespace` å¯¹è±¡å°†æ ¹æ®æ˜¯å¦æä¾›äº†è¯¥å‚æ•°æ¥è®¾ç½®å¸ƒå°”å€¼ `True` æˆ– `False`ã€‚

5. **å¯è¿­ä»£**ï¼š`Namespace` å¯¹è±¡æ˜¯å¯è¿­ä»£çš„ï¼Œå¯ä»¥è¿­ä»£å‡ºæ‰€æœ‰çš„å±æ€§åç§°å’Œå€¼ã€‚

6. **ä½œä¸ºå­—å…¸ä½¿ç”¨**ï¼š`Namespace` å¯¹è±¡çš„è¡Œä¸ºç±»ä¼¼äºä¸€ä¸ªåªè¯»çš„å­—å…¸ï¼Œå¯ä»¥ä½¿ç”¨ `args.attr` æ¥è®¿é—®å±æ€§ï¼Œå…¶ä¸­ `attr` æ˜¯å‚æ•°çš„ `dest` åç§°ã€‚

7. **å­—ç¬¦ä¸²è¡¨ç¤º**ï¼šå°† `Namespace` å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œå®ƒå°†æ˜¾ç¤ºæ‰€æœ‰å‚æ•°çš„åç§°å’Œå€¼ï¼Œè¿™åœ¨è°ƒè¯•æ—¶éå¸¸æœ‰ç”¨ã€‚

# 2. æ·»åŠ å‚æ•°add_argument()

ä¸Šé¢åœ¨ä½¿ç”¨ `add_argument()` å‡½æ•°çš„æ—¶å€™æ²¡æœ‰å¯¹å…¶ä¸­çš„ç»†èŠ‚è¿›è¡Œè¯´æ˜ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬è¯¦ç»†è¯´æ˜ä¸€ä¸‹ã€‚

```python
ArgumentParser.add_argument(name or flags...[, action][, nargs][, const][, default][, type][, choices][, required][, help][, metavar][, dest])
```

å®šä¹‰å•ä¸ªçš„å‘½ä»¤è¡Œå‚æ•°åº”å½“å¦‚ä½•è§£æã€‚æ¯ä¸ªå½¢å‚éƒ½åœ¨ä¸‹é¢æœ‰å®ƒè‡ªå·±æ›´å¤šçš„æè¿°ï¼Œé•¿è¯çŸ­è¯´æœ‰ï¼š

- `name` or `flags`ï¼šä¸€ä¸ªå‘½åæˆ–è€…ä¸€ä¸ªé€‰é¡¹å­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œä¾‹å¦‚ `foo` æˆ– `-f`, `--foo`ã€‚
- `action`ï¼šå½“å‚æ•°åœ¨å‘½ä»¤è¡Œä¸­å‡ºç°æ—¶ä½¿ç”¨çš„åŠ¨ä½œåŸºæœ¬ç±»å‹ã€‚
- `nargs`ï¼šå‘½ä»¤è¡Œå‚æ•°åº”å½“æ¶ˆè€—çš„æ•°ç›®ã€‚
- `const`ï¼šè¢«ä¸€äº› `action` å’Œ `nargs` é€‰æ‹©æ‰€éœ€æ±‚çš„å¸¸æ•°ã€‚
- `default`ï¼šå½“å‚æ•°æœªåœ¨å‘½ä»¤è¡Œä¸­å‡ºç°å¹¶ä¸”ä¹Ÿä¸å­˜åœ¨äºå‘½åç©ºé—´å¯¹è±¡æ—¶æ‰€äº§ç”Ÿçš„å€¼ã€‚
- `type`ï¼šå‘½ä»¤è¡Œå‚æ•°åº”å½“è¢«è½¬æ¢æˆçš„ç±»å‹ã€‚
- `choices`ï¼šç”±å…è®¸ä½œä¸ºå‚æ•°çš„å€¼ç»„æˆçš„åºåˆ—ã€‚
- `required`ï¼šæ­¤å‘½ä»¤è¡Œé€‰é¡¹æ˜¯å¦å¯çœç•¥ ï¼ˆä»…é€‰é¡¹å¯ç”¨ï¼‰ã€‚
- `help`ï¼šä¸€ä¸ªæ­¤é€‰é¡¹ä½œç”¨çš„ç®€å•æè¿°ã€‚
- `metavar`ï¼šåœ¨ä½¿ç”¨æ–¹æ³•æ¶ˆæ¯ä¸­ä½¿ç”¨çš„å‚æ•°å€¼ç¤ºä¾‹ã€‚
- `dest`ï¼šè¢«æ·»åŠ åˆ° `parse_args()` æ‰€è¿”å›å¯¹è±¡ä¸Šçš„å±æ€§åã€‚

## 2.1 name or flags

`add_argument()` æ–¹æ³•å¿…é¡»çŸ¥é“æ˜¯è¦æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå¦‚ `-f` æˆ– `--foo`ï¼Œè¿˜æ˜¯ä¸€ä¸ªä½ç½®å‚æ•°ï¼Œå¦‚ç”±æ–‡ä»¶åç»„æˆçš„åˆ—è¡¨ã€‚ å› æ­¤é¦–å…ˆä¼ é€’ç»™ `add_argument()` çš„å‚æ•°å¿…é¡»æ˜¯ä¸€ç»„æ——æ ‡ï¼Œæˆ–ä¸€ä¸ªç®€å•çš„å‚æ•°åç§°ã€‚

### 2.1.1 å¯é€‰å‚æ•°

```python
parser.add_argument('-e', '--epoch')  # ğŸŒŸ æ¨è
parser.add_argument('--epoch')  # ğŸŒŸ æ¨è
parser.add_argument('-e')  # âŒ ä¸æ¨èï¼ˆå¦‚æœåªå†™ä¸€ä¸ªå˜é‡ï¼Œå»ºè®®å˜é‡åå†™å®Œæ•´ï¼‰
parser.add_argument('--epoch', '-e')  # âŒ ä¸æ¨è
parser.add_argument('-epoch', '--e')  # âŒ ä¸æ¨è
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ˜¯æ¨èå‰ä¸¤ç§å†™æ³•ï¼Œåä¸‰ç§å†™æ³•éƒ½ä¸æ¨èã€‚

> ğŸ’¡ è¿™é‡Œæ˜¯ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œå› æ­¤éƒ½ä½¿ç”¨äº† epoch ä½œä¸ºå˜é‡ï¼Œä¸Šé¢çš„ä»£ç åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šæŠ¥é”™ï¼Œå› ä¸ºåŒåå˜é‡å·²å­˜åœ¨ã€‚

### 2.1.2 ä½ç½®å‚æ•°

```python
parser.add_argument('epcoh')
parser.add_argument('batch_size')
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼š

1. ä½ç½®å‚æ•°æ²¡æœ‰`-`æˆ–`--`ï¼Œå› æ­¤å®ƒä»¬çš„é¡ºåºæ˜¯éå¸¸é‡è¦çš„
2. æˆ‘ä»¬åœ¨åŒæ—¶ä½¿ç”¨ä½ç½®å‚æ•°å’Œå¯é€‰å‚æ•°æ—¶ï¼Œä¸€èˆ¬å…ˆå†™ä½ç½®å‚æ•°ï¼Œæœ€åå†å†™å¯é€‰å‚æ•°ã€‚

ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š

```python
import argparse
from prettytable import PrettyTable
import re


def get_help_for_argument(parser, arg_name):
    for action in parser._actions:
        if action.dest == arg_name or (action.option_strings and any(opt == '--'+arg_name for opt in action.option_strings)):
            return action.help
    return "N/A"


def print_args(args, parser):
    ptable = PrettyTable(['Argument', 'Type', 'Value', 'Help/Description'])
    ptable.align = 'l'
    

    for name, value in args._get_kwargs():
        ptable.add_row(
            [
                name, 
                re.findall(pattern=r"<class '(.*)'>", string=str(type(value)))[0], 
                value, 
                get_help_for_argument(parser=parser, arg_name=name)
            ]
        )
    
    print(ptable)


def get_opts():
    # åˆ›å»ºä¸€ä¸ªè§£æå™¨å¯¹è±¡
    parser = argparse.ArgumentParser(description='The example for Le0v1n article')

    # ä¸ºè§£æå™¨å¯¹è±¡æ·»åŠ å‚æ•°
    parser.add_argument('config_path', type=str, default="", help='The path of configuration file')
    parser.add_argument('--batch_size', type=int, default=16, help='The size of batch for dataloader')
    parser.add_argument('-lr', '--learning_rate', type=float, default=1e-4, help='The learning rate of optimizer')
    parser.add_argument('-v', '--verbose', action='store_true', default=False)

    # è®©è§£æå™¨å¯¹è±¡è§£æå‚æ•°
    args = parser.parse_args()
    
    return args, parser


if __name__ == '__main__':
    args, parser = get_opts()
    print_args(args, parser)
```

CLIï¼š

```bash
python b.py config.yolov8s --batch_size 128 -lr 0.00001 -v
```

è¿è¡Œç»“æœï¼š

```
+---------------+-------+---------------------+----------------------------------+
| Argument      | Type  | Value               | Help/Description                 |
+---------------+-------+---------------------+----------------------------------+
| config_path   | str   | config/yolov8s.yaml | The path of configuration file   |
| batch_size    | int   | 128                 | The size of batch for dataloader |
| learning_rate | float | 1e-05               | The learning rate of optimizer   |
| verbose       | bool  | True                | None                             |
+---------------+-------+---------------------+----------------------------------+
```

## 2.2 action

`ArgumentParser` å¯¹è±¡å°†å‘½ä»¤è¡Œå‚æ•°ä¸åŠ¨ä½œç›¸å…³è”ã€‚è¿™äº›åŠ¨ä½œå¯ä»¥åšä¸å®ƒä»¬ç›¸å…³è”çš„å‘½ä»¤è¡Œå‚æ•°çš„ä»»ä½•äº‹ï¼Œå°½ç®¡å¤§å¤šæ•°åŠ¨ä½œåªæ˜¯ç®€å•çš„å‘ `parse_args()` `è¿”å›çš„å¯¹è±¡ä¸Šæ·»åŠ å±æ€§ã€‚action` å‘½åå‚æ•°æŒ‡å®šäº†è¿™ä¸ªå‘½ä»¤è¡Œå‚æ•°åº”å½“å¦‚ä½•å¤„ç†ã€‚

### 2.2.1 store

åœ¨ `argparse` æ¨¡å—ä¸­ï¼Œ`store` æ˜¯ `action` å‚æ•°çš„ä¸€ä¸ªé€‰é¡¹ï¼Œç”¨äºæŒ‡å®šå½“å‘½ä»¤è¡Œä¸­å‡ºç°æŸä¸ªå‚æ•°æ—¶åº”è¯¥é‡‡å–çš„åŠ¨ä½œã€‚`store` åŠ¨ä½œçš„ç›®çš„æ˜¯å°†å‘½ä»¤è¡Œä¸­æä¾›çš„å€¼å­˜å‚¨åˆ° `argparse.Namespace` å¯¹è±¡çš„å±æ€§ä¸­ã€‚è¿™æ˜¯ `argparse` ä¸­æœ€å¸¸è§çš„åŠ¨ä½œä¹‹ä¸€ï¼ˆä¹Ÿæ˜¯é»˜è®¤çš„åŠ¨ä½œï¼‰ã€‚

ä»¥ä¸‹æ˜¯ä½¿ç”¨ `store` åŠ¨ä½œæ—¶çš„ä¸€äº›å…³é”®ç‚¹ï¼š

1. **å­˜å‚¨å€¼**ï¼šå½“ `action` è®¾ç½®ä¸º `store` æ—¶ï¼ˆè¿™æ˜¯é»˜è®¤å€¼ï¼‰ï¼Œå¦‚æœç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­æä¾›äº†å‚æ•°ï¼Œå…¶å€¼å°†è¢«å­˜å‚¨åœ¨ `Namespace` å¯¹è±¡çš„ç›¸åº”å±æ€§ä¸­ã€‚

2. **ç±»å‹è½¬æ¢**ï¼š`argparse` ä¼šæ ¹æ® `add_argument` æ–¹æ³•ä¸­æŒ‡å®šçš„ `type` å‚æ•°è‡ªåŠ¨å°†è¾“å…¥çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºç›¸åº”çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ `type=int`ï¼Œåˆ™è¾“å…¥çš„å­—ç¬¦ä¸²å°†è¢«è½¬æ¢ä¸ºæ•´æ•°ã€‚

3. **é»˜è®¤å€¼**ï¼šå¦‚æœç”¨æˆ·æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸­æä¾›è¯¥å‚æ•°ï¼Œä¸”ä½ æä¾›äº† `default` å€¼ï¼Œ`Namespace` å¯¹è±¡çš„ç›¸åº”å±æ€§å°†è¢«è®¾ç½®ä¸º `default` å€¼ã€‚

4. **å¿…éœ€æ€§**ï¼šå¦‚æœå‚æ•°æ˜¯å¿…éœ€çš„ï¼ˆå³ `required=True`ï¼‰ï¼Œå¹¶ä¸”ç”¨æˆ·æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸­æä¾›è¯¥å‚æ•°ï¼Œ`argparse` å°†æŠ¥é”™å¹¶æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ `store` åŠ¨ä½œçš„ä¾‹å­ï¼š

```python
parser.add_argument('--value', type=int, default=10, help='An integer value')
```

```
+----------+------+-------+------------------+
| Argument | Type | Value | Help/Description |
+----------+------+-------+------------------+
| value    | int  | 10    | An integer value |
+----------+------+-------+------------------+
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ `--value` å‚æ•°å¹¶æä¾›äº†ä¸€ä¸ªå€¼ï¼Œä¾‹å¦‚ `--value 20`ï¼Œ`args.value` å°†è¢«è®¾ç½®ä¸º `20`ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾› `--value` å‚æ•°ï¼Œ`args.value` å°†ä½¿ç”¨é»˜è®¤å€¼ `10`ã€‚

`store` åŠ¨ä½œæ˜¯å¤„ç†å‘½ä»¤è¡Œå‚æ•°çš„æ ‡å‡†æ–¹å¼ï¼Œé€‚ç”¨äºå¤§å¤šæ•°éœ€è¦æ¥å—ç”¨æˆ·è¾“å…¥çš„åœºæ™¯ã€‚

### 2.2.2 store_const

åœ¨ `argparse` æ¨¡å—ä¸­ï¼Œ`store_const` æ˜¯ä¸€ä¸ª `action` å‚æ•°çš„é€‰é¡¹ï¼Œå®ƒç”¨äºæŒ‡å®šå½“å‘½ä»¤è¡Œä¸­å‡ºç°æŸä¸ªå‚æ•°æ—¶åº”è¯¥é‡‡å–çš„åŠ¨ä½œã€‚å½“ `action` è¢«è®¾ç½®ä¸º `store_const` æ—¶ï¼Œæ— è®ºå‘½ä»¤è¡Œä¸­æ˜¯å¦æä¾›äº†è¯¥å‚æ•°çš„å€¼ï¼Œå­˜å‚¨çš„å€¼éƒ½å°†è¢«è®¾ç½®ä¸ºåœ¨ `add_argument` æ–¹æ³•ä¸­æŒ‡å®šçš„å¸¸é‡å€¼ã€‚

ä»¥ä¸‹æ˜¯ä½¿ç”¨ `store_const` æ—¶çš„ä¸€äº›å…³é”®ç‚¹ï¼š

1. **å¸¸é‡å€¼**ï¼šä½¿ç”¨ `store_const` æ—¶ï¼Œä½ éœ€è¦æä¾›ä¸€ä¸ª `const` å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼å°†è¢«å­˜å‚¨åœ¨ `Namespace` å¯¹è±¡çš„ç›¸åº”å±æ€§ä¸­ã€‚

2. **å¿½ç•¥å‘½ä»¤è¡Œå€¼**ï¼š<font color='red'><b>ä½¿ç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­æä¾›äº†å€¼ï¼Œè¿™ä¸ªå€¼ä¹Ÿä¼šè¢«å¿½ç•¥</b></font>ï¼Œå­˜å‚¨çš„å°†æ˜¯ `const` å‚æ•°æŒ‡å®šçš„å¸¸é‡å€¼ã€‚

3. **é»˜è®¤è¡Œä¸º**ï¼šå¦‚æœç”¨æˆ·æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸­æä¾›è¯¥å‚æ•°ï¼Œ`Namespace` å¯¹è±¡çš„ç›¸åº”å±æ€§å°†ä¸ä¼šè¢«è®¾ç½®ï¼Œé™¤éä½ åŒæ—¶æä¾›äº† `default` å‚æ•°ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ `store_const` çš„ä¾‹å­ï¼š

```python
parser.add_argument('--mode', action='store_const', const='DEBUG', default='INFO', help='Set the mode to const value')
```

è¿è¡Œç»“æœï¼š

```bash 
# ğŸª ç¬¬ä¸€ç§æƒ…å†µï¼šå¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨CLIä¸­å¼€å¯è¿™ä¸ªå‚æ•°ï¼Œåˆ™ä¸ºdefaultå€¼
python c.py

+----------+------+-------+-----------------------------+
| Argument | Type | Value | Help/Description            |
+----------+------+-------+-----------------------------+
| mode     | str  | INFO  | Set the mode to const value |
+----------+------+-------+-----------------------------+

# ğŸª ç¬¬äºŒç§æƒ…å†µï¼šå¦‚æœæˆ‘ä»¬åœ¨CLIä¸­å¼€å¯è¿™ä¸ªå‚æ•°ï¼Œåˆ™ä¸ºconstå€¼
python c.py --mode
+----------+------+-------+-----------------------------+
| Argument | Type | Value | Help/Description            |
+----------+------+-------+-----------------------------+
| mode     | str  | DEBUG | Set the mode to const value |
+----------+------+-------+-----------------------------+
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š
- å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾› `--mode` å‚æ•°ï¼Œ`args.mode` å°†ä½¿ç”¨é»˜è®¤å€¼ `'INFO'`ã€‚
- å¦‚æœç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ `--mode` å‚æ•°ï¼Œ`args.mode` éƒ½å°†è¢«è®¾ç½®ä¸º `'DEBUG'`ã€‚

**æ€»ç»“**ï¼šä½¿ç”¨ `store_const` å¯ä»¥æ–¹ä¾¿åœ°æ ¹æ®æŸä¸ªé€‰é¡¹çš„å­˜åœ¨ä¸å¦æ¥è®¾ç½®ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œè€Œä¸éœ€è¦å…³å¿ƒé€‰é¡¹çš„å…·ä½“å€¼æ˜¯ä»€ä¹ˆã€‚<font color='green'><b>è¿™åœ¨éœ€è¦æ ¹æ®ä¸€ä¸ªFlagæ¥å¯ç”¨æˆ–ç¦ç”¨æŸäº›åŠŸèƒ½æ—¶éå¸¸æœ‰ç”¨</b></font>ã€‚

### 2.2.3 store_trueå’Œstore_false

`argparse` æ˜¯ Python çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºç¼–å†™ç”¨æˆ·å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£ã€‚ç¨‹åºå®šä¹‰å®ƒéœ€è¦çš„å‚æ•°ï¼Œç„¶å `argparse` å°†è‡ªåŠ¨ç”Ÿæˆå¸®åŠ©å’Œä½¿ç”¨è¯´æ˜ï¼Œå¹¶å¤„ç†ä¸å‘½ä»¤è¡Œå‚æ•°è§£æç›¸å…³çš„ä»»åŠ¡ã€‚

åœ¨ `argparse` ä¸­ï¼Œ`store_true` å’Œ `store_false` æ˜¯ä¸¤ç§ç”¨äºå¤„ç†å¸ƒå°”æ ‡å¿—ï¼ˆä¹Ÿç§°ä¸ºå¼€å…³æˆ–é€‰é¡¹ï¼‰çš„ action ç±»å‹ã€‚

#### 2.2.3.1 store_true

- å½“ä½¿ç”¨ `store_true` ä½œä¸º action æ—¶ï¼Œ<font color='red'><b>å¦‚æœå‘½ä»¤è¡Œä¸­å‡ºç°äº†è¿™ä¸ªé€‰é¡¹</b></font>ï¼Œé‚£ä¹ˆå¯¹åº”çš„å˜é‡å°†è¢«è®¾ç½®ä¸º `True`ã€‚
- å¦‚æœæ²¡æœ‰æŒ‡å®šè¿™ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆå˜é‡å°†ä¿æŒå…¶é»˜è®¤å€¼ï¼Œé€šå¸¸æ˜¯ `False`ã€‚

ä¾‹å­ï¼š

```python
parser.add_argument('--flag_1', '-f1', action='store_true', help='å¦‚æœå‘½ä»¤è¡Œå‡ºç°äº†é‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯Trueï¼Œå¦åˆ™å°±æ˜¯False')
parser.add_argument('--flag_2', '-f2', action='store_true', help='å¦‚æœå‘½ä»¤è¡Œå‡ºç°äº†é‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯Trueï¼Œå¦åˆ™å°±æ˜¯False')
```

CLIï¼š

```bash
python Python/argparse/code/c.py -f1
```

ç»“æœå¦‚ä¸‹ï¼š

```
+----------+------+-------+---------------------------------------------------+
| Argument | Type | Value | Help/Description                                  |
+----------+------+-------+---------------------------------------------------+
| flag_1   | bool | True  | å¦‚æœå‘½ä»¤è¡Œå‡ºç°äº†é‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯Trueï¼Œå¦åˆ™å°±æ˜¯False |
| flag_2   | bool | False | å¦‚æœå‘½ä»¤è¡Œå‡ºç°äº†é‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯Trueï¼Œå¦åˆ™å°±æ˜¯False |
+----------+------+-------+---------------------------------------------------+
```

å¯ä»¥å‘ç°ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨CLIä¸­ä½¿ç”¨äº†`-f1`ï¼Œå®ƒè¢«è§¦å‘äº†ï¼Œæ‰€ä»¥å€¼ä¸º`True`ï¼Œè€Œ`-f2`è¿™ä¸ªå‚æ•°æ²¡æœ‰åœ¨CLIä¸­ä½¿ç”¨ï¼Œæ²¡æœ‰è¢«è§¦å‘ï¼Œæ‰€ä»¥å®ƒçš„å€¼è¿˜æ˜¯`False`ã€‚

#### 2.2.3.2 store_false

- ç±»ä¼¼åœ°ï¼Œ`store_false` ç”¨äºè®¾ç½®å˜é‡ä¸º `False`ã€‚
- å¦‚æœå‘½ä»¤è¡Œä¸­å‡ºç°äº†è¿™ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆå¯¹åº”çš„å˜é‡å°†è¢«è®¾ç½®ä¸º `False`ã€‚
- å¦‚æœæ²¡æœ‰æŒ‡å®šè¿™ä¸ªé€‰é¡¹ï¼Œå˜é‡å°†ä¿æŒå…¶é»˜è®¤å€¼ï¼Œé€šå¸¸æ˜¯ `True`ã€‚

ä¾‹å­ï¼š

```python
parser.add_argument('--flag_1', '-f1', action='store_false', help='å¦‚æœå‘½ä»¤è¡Œå‡ºç°äº†é‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯Falseï¼Œå¦åˆ™å°±æ˜¯True')
parser.add_argument('--flag_2', '-f2', action='store_false', help='å¦‚æœå‘½ä»¤è¡Œå‡ºç°äº†é‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯Falseï¼Œå¦åˆ™å°±æ˜¯True')
```

CLIï¼š

```bash
python Python/argparse/code/c.py -f1
```

ç»“æœï¼š

```
+----------+------+-------+---------------------------------------------------+
| Argument | Type | Value | Help/Description                                  |
+----------+------+-------+---------------------------------------------------+
| flag_1   | bool | False | å¦‚æœå‘½ä»¤è¡Œå‡ºç°äº†é‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯Falseï¼Œå¦åˆ™å°±æ˜¯True |
| flag_2   | bool | True  | å¦‚æœå‘½ä»¤è¡Œå‡ºç°äº†é‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯Falseï¼Œå¦åˆ™å°±æ˜¯True |
+----------+------+-------+---------------------------------------------------+
```

å¯ä»¥çœ‹åˆ°ï¼Œ`store_false`ä¸`store_true`çš„æ•ˆæœæ˜¯åç€çš„ã€‚

> ğŸ’¡ `store_false`è¿™ç§å¾ˆå°‘è§ï¼Œæˆ‘ä»¬å¯ä»¥å¿˜è®°å®ƒğŸ¤£ã€‚

## 2.2.4 append

åœ¨ `argparse` æ¨¡å—ä¸­ï¼Œ`append` æ˜¯ä¸€ä¸ª action ç±»å‹ï¼Œå®ƒç”¨äºå¤„ç†å‘½ä»¤è¡Œå‚æ•°ï¼Œ<font color='red'><b>å…è®¸ç”¨æˆ·ä¸ºæŸä¸ªå‚æ•°å¤šæ¬¡ä¼ å…¥å€¼ï¼Œå¹¶å°†è¿™äº›å€¼æ”¶é›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­</b></font>ã€‚è¿™åœ¨éœ€è¦æ¥å—å¤šä¸ªå€¼ä½œä¸ºè¾“å…¥æ—¶éå¸¸æœ‰ç”¨ã€‚

**ä¾‹å­1**ï¼š

```python
parser.add_argument('--items', action='append', help='å¯ä»¥å¤šæ¬¡æŒ‡å®šçš„å‚æ•°')
```

**CLI**ï¼š

```bash
python Python/argparse/code/c.py
```

**ç»“æœ**ï¼š

```
+----------+----------+-------+--------------------+
| Argument | Type     | Value | Help/Description   |
+----------+----------+-------+--------------------+
| items    | NoneType | None  | å¯ä»¥å¤šæ¬¡æŒ‡å®šçš„å‚æ•° |
+----------+----------+-------+--------------------+
```

æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬åœ¨CLIä¸­ä»€ä¹ˆéƒ½ä¸ä¼ ç»™å®ƒï¼Œå®ƒä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä½†å®ƒçš„é»˜è®¤å€¼æ˜¯Noneã€‚

**ä¾‹å­2**ï¼š

```python
parser.add_argument('--items', action='append', default=['Le0v1n'], help='å¯ä»¥å¤šæ¬¡æŒ‡å®šçš„å‚æ•°')
```

**CLI**ï¼š

```bash
python Python/argparse/code/c.py
```

**ç»“æœ**ï¼š

```
+----------+------+------------+--------------------+
| Argument | Type | Value      | Help/Description   |
+----------+------+------------+--------------------+
| items    | list | ['Le0v1n'] | å¯ä»¥å¤šæ¬¡æŒ‡å®šçš„å‚æ•° |
+----------+------+------------+--------------------+
```

è¿™è¯´æ˜è¿™ä¸ªå˜é‡å¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼ï¼Œé‚£ä¹ˆå®ƒçš„é»˜è®¤å€¼å°±æ˜¯`None`ï¼Œå¦åˆ™å°±æ˜¯æˆ‘ä»¬æŒ‡å®šçš„å€¼ã€‚

**ä¾‹å­3**ï¼š

```python
parser.add_argument('--items', '-i', action='append', default=['Le0v1n'], help='å¯ä»¥å¤šæ¬¡æŒ‡å®šçš„å‚æ•°')
```

**CLI**ï¼š

```bash
python Python/argparse/code/c.py --items Le0v1n --items leovin -i 123 -i "Tom" -i Jerry
```

**ç»“æœ**ï¼š

```
+----------+------+-------------------------------------------------------+--------------------+
| Argument | Type | Value                                                 | Help/Description   |
+----------+------+-------------------------------------------------------+--------------------+
| items    | list | ['Le0v1n', 'Le0v1n', 'leovin', '123', 'Tom', 'Jerry'] | å¯ä»¥å¤šæ¬¡æŒ‡å®šçš„å‚æ•° |
+----------+------+-------------------------------------------------------+--------------------+
```

è¿™è¯´æ˜ï¼š

- `action='append'`å¯ä»¥æ¥æ”¶å¤šä¸ªå˜é‡ï¼ˆä¸è¦æœ‰ç©ºæ ¼ï¼‰
- åœ¨CLIä¸­ï¼Œ`"  "` å’Œ `  ` ä»¥åŠ `'   '` éƒ½æ˜¯å¯ä»¥çš„
- åœ¨CLIä¸­ï¼Œæ•°å­—ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯å­—ç¬¦ä¸²

### 2.2.5 append_const

https://docs.python.org/zh-cn/3/library/argparse.html#action

# å‚è€ƒ/çŸ¥è¯†æ¥æº

1. [Pythonå®˜æ–¹æ–‡æ¡£ï¼šargparse --- ç”¨äºå‘½ä»¤è¡Œé€‰é¡¹ã€å‚æ•°å’Œå­å‘½ä»¤çš„è§£æå™¨](https://docs.python.org/zh-cn/3/library/argparse.html)